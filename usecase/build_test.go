package usecase

import (
	"dreampc/domain"
	"testing"

	"github.com/stretchr/testify/assert"
)

// high cpu score when in productivity
// high gpu score when in gaming
func TestBuild_BestByBudgetAndFilter_WhenSufficientBudget(t *testing.T) {
	sut := NewBuild()
	budget := 1500.00
	goal := domain.BuildGoalProductivity
	build, err := sut.BestByBudgetAndFilters(budget, goal)
	assert.NoError(t, err)
	assert.LessOrEqual(t, build.Price, budget)
}

func TestBuild_BestByBudgetAndFilter_WhenInsufficientBudget(t *testing.T) {
	sut := NewBuild()
	budget := 700.00
	goal := domain.BuildGoalProductivity
	_, err := sut.BestByBudgetAndFilters(budget, goal)
	assert.Equal(t, domain.ErrInsufficientBudget, err)
}
